{% load dict_extras %}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/trix/dist/trix.css">
<script src="https://cdn.jsdelivr.net/npm/trix/dist/trix.js"></script>

<style>
    .container {
        max-width: 750px;
        margin: 2em auto;
        background: #ffffff;
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        padding: 24px 28px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.04);
    }

    h1 {
        font-size: 1.6em;
        font-weight: 600;
        color: #111827;
        margin-bottom: 0.4em;
    }

    .subtitle {
        color: #4b5563;
        margin-bottom: 1.4em;
    }

    .template-section {
        margin-bottom: 2em;
    }

    .template-label {
        font-weight: 600;
        margin-bottom: 6px;
        display: block;
        color: #374151;
    }

    trix-editor {
        border: 1px solid #d1d5db;
        border-radius: 6px;
        min-height: 160px;
        padding: 10px;
        background: #f9fafb;
    }

    trix-editor:focus {
        outline: none;
        border-color: #2563eb;
        box-shadow: 0 0 0 2px rgba(37,99,235,0.2);
        background: #ffffff;
    }

    .btn {
        padding: 10px 16px;
        border-radius: 4px;
        border: none;
        cursor: pointer;
        font-size: 0.95em;
        margin-right: 8px;
    }

    .btn-primary {
        background: #2563eb;
        color: white;
    }

    .btn-primary:hover {
        background: #1d4ed8;
    }

    .btn-secondary {
        background: #6b7280;
        color: white;
    }

    .btn-secondary:hover {
        background: #4b5563;
    }

    .back-link {
        display: inline-block;
        margin-top: 1.4em;
        padding: 8px 14px;
        background: #6b7280;
        color: white;
        text-decoration: none;
        border-radius: 4px;
    }

    .back-link:hover {
        background: #4b5563;
    }
</style>

<div class="container">
    <h1>Message Templates</h1>
    <p class="subtitle">Edit the default messages used when generating student messages.</p>

    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}

        <div class="template-section">
            <label class="template-label">üéâ Congratulations Message</label>
            <trix-editor input="template_congrats"></trix-editor>
        </div>

        <div class="template-section">
            <label class="template-label">üí™ Encouragement Message</label>
            <trix-editor input="template_encourage"></trix-editor>
        </div>

        <button type="submit" name="action" value="save" class="btn btn-primary">
            Save Templates
        </button>

        <button type="submit" name="action" value="preview" class="btn btn-secondary">
            Preview Template
        </button>
    </form>

    <a href="{% url 'start' %}" class="back-link">‚Üê Back to Start</a>
</div>